---
title: "Antidepressants for pain management in adults with chronic pain"
description: |
  Network meta-analysis results
site: bookdown::bookdown_site
bibliography: references.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

knitr::opts_chunk$set(echo = FALSE, warnings = FALSE, message = FALSE)

knitr::opts_knit$set(root.dir = "../")

suppressPackageStartupMessages({
  library(tidyverse)
  library(multinma)
  library(targets)
  library(assertthat)
  library(glue)
  library(gt)
})

source("preamble.R")

```


# Overview

```{r}

tar_load(obs_dat)

```



## Observations included

```{r}
obs_dat %>%
  group_by(outcome, intervention_grouping) %>% 
  summarise(
    studies = n_distinct(study_id),
    n_interventions = n_distinct(intervention),
    interventions = unique(intervention) %>% paste(collapse = ", "),
    n_conditions = n_distinct(general_pain_grouping),
    conditions = unique(general_pain_grouping) %>% paste(collapse = ", "),
    timepoint = unique(timepoint) %>% paste(collapse = ", "),
    change_score = sum(change_score, na.rm = TRUE),
    participants = sum(n, na.rm = TRUE)
  ) %>% 
  gt() %>% 
  tab_header(
    "Outcome summary of interventions, studies, and conditions"
  ) %>% 
  tab_source_note("General pain grouping is currently being used, but this can be switched or duplicated for IASP.")

```

## Comparisons

```{r message=FALSE}
tar_read(pw_type_group) %>%
  group_by(outcome, comp_grouping, interventions, timepoint) %>% 
  summarise(
    studies = n_distinct(study_id)
  ) %>% 
  arrange(outcome, desc(studies)) %>% 
  ungroup() %>% 
  gt(rowname_col = "outcome") %>% 
  tab_header("Comparison groups used in pairwise models")

```


